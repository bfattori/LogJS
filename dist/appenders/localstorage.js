(function(c,b){var a=function(a){c.BaseAppender.call(this);this.logRoll=JSON.parse(b.localStorage.getItem("LogJS"))||[];this.logRollSize=JSON.parse(b.localStorage.getItem("LogJS_size"))||0;this.changed=!1;this.config={timeoutInterval:this.configOpt("timeoutInterval",a,1E4),maxSize:this.configOpt("timeoutInterval",a,4194304)};var e=this;b.setTimeout(function d(){e.serialize();b.setTimeout(d,e.config.timeoutInterval)},this.config.timeoutInterval)};a.prototype=Object.create(c.BaseAppender.prototype);
    a.prototype.name="LocalStorageAppender";a.prototype.log=function(b,a,f,d,g){a={t:b,ts:a,m:f,u:d,l:g};this.logRollSize+=JSON.stringify(a).length;for(this.logRoll.push(a);this.logRollSize>this.config.maxSize;)a=this.logRoll.shift(),this.logRollSize-=JSON.stringify(a).length;this.changed=!0;(b===c.ERROR||b===c.WARN)&&this.serialize()};a.prototype.serialize=function(){this.changed&&(b.localStorage.setItem("LogJS",JSON.stringify(this.logRoll)),b.localStorage.setItem("LogJS_size",this.logRollSize),this.changed=
        !1)};a.prototype.deserialize=function(){return JSON.parse(b.localStorage.getItem("LogJS"))};a.prototype.clear=function(){b.localStorage.removeItem("LogJS");b.localStorage.removeItem("LogJS_size");this.logRollSize=0;this.logRoll.length=0;this.changed=!1};b.localStorage&&c.addAppender(a)})(LogJS,this);